<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>Partners on Pavan's Blog</title><link>https://pchavali09.github.io/tags/partners/</link><description>Recent content in Partners on Pavan's Blog</description><generator>Hugo -- 0.152.2</generator><language>en-us</language><lastBuildDate>Sun, 09 Jun 2024 00:00:00 +0000</lastBuildDate><atom:link href="https://pchavali09.github.io/tags/partners/index.xml" rel="self" type="application/rss+xml"/><item><title>Improve Partner Collaboration Using Salesforce: Master User Automation</title><link>https://pchavali09.github.io/posts/improve-partner-collaboration-using-salesforce-master-user-automation/</link><pubDate>Sun, 09 Jun 2024 00:00:00 +0000</pubDate><guid>https://pchavali09.github.io/posts/improve-partner-collaboration-using-salesforce-master-user-automation/</guid><description>&lt;p&gt;Photo by &lt;a href="https://unsplash.com/@omilaev?utm_source=medium&amp;amp;utm_medium=referral"&gt;Igor Omilaev&lt;/a&gt; on &lt;a href="https://unsplash.com?utm_source=medium&amp;amp;utm_medium=referral"&gt;Unsplash&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="overview"&gt;&lt;strong&gt;Overview&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;In today’s fast-paced business world, working efficiently with partners is essential. Salesforce CPQ (Configure, Price, Quote) and Experience Cloud together can greatly improve the way partners interact with your business. This three-part series will show you how these tools can make partner interactions smoother and more productive. We’ll start by focusing on user automation in the first part.&lt;/p&gt;
&lt;p&gt;In “Mastering User Automation,” we’ll look at how automating user-related tasks can save time and reduce mistakes. Key features we’ll cover include setting up user accounts automatically, automating workflows, and sending customized notifications. These tools ensure partners get the right access at the right time, making things easier for everyone.&lt;/p&gt;</description><content:encoded><![CDATA[<p>Photo by <a href="https://unsplash.com/@omilaev?utm_source=medium&amp;utm_medium=referral">Igor Omilaev</a> on <a href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral">Unsplash</a></p>
<h3 id="overview"><strong>Overview</strong></h3>
<p>In today’s fast-paced business world, working efficiently with partners is essential. Salesforce CPQ (Configure, Price, Quote) and Experience Cloud together can greatly improve the way partners interact with your business. This three-part series will show you how these tools can make partner interactions smoother and more productive. We’ll start by focusing on user automation in the first part.</p>
<p>In “Mastering User Automation,” we’ll look at how automating user-related tasks can save time and reduce mistakes. Key features we’ll cover include setting up user accounts automatically, automating workflows, and sending customized notifications. These tools ensure partners get the right access at the right time, making things easier for everyone.</p>
<h3 id="key-topicscovered">Key Topics Covered</h3>
<ol>
<li>
<p>Automatic User Setup: Make onboarding new partners easier by automating the creation of accounts, assigning roles, and setting access permissions.</p>
</li>
<li>
<p>Workflow Automation: Speed up routine tasks like approvals, document management, and status updates to keep partner interactions smooth and consistent.</p>
</li>
<li>
<p>Customized Notifications: Keep partners informed with automated alerts and notifications about important updates and actions they need to take.</p>
</li>
<li>
<p>Integration with Salesforce CPQ: See how user automation works with CPQ to help partners configure, price, and quote products efficiently.</p>
</li>
<li>
<p>Real-life Examples and Tips: Learn from real-world examples and get tips on implementing user automation effectively in your business.</p>
</li>
</ol>
<p>By the end of this article, you’ll understand how user automation in Salesforce CPQ and Experience Cloud can improve the partner experience, setting the stage for more in-depth discussions on portal setup and CPQ integration in the next parts of this series.</p>
<h3 id="use-casescenario">Use Case Scenario</h3>
<p>The goal is to enable a Contact as an Experience Cloud user (Partner portal) so that they can self-serve CPQ quotes and manage other CPQ-related activities using the Partner portal. Typically, user access is managed by an admin through User administration. However, for Experience Cloud users, the process is slightly different. Instead of creating a user record through Setup, you enable it directly through the Contact record.</p>
<p>To set up a Partner user, a Salesforce user needs the ‘Manage External Users’ permission. You also need to add specific buttons and actions on the Contact and Account objects to grant external users access. Usually, this is done manually, but it can be automated for efficiency. In this article, we’ll focus on automating this process using Salesforce Flows.</p>
<p><strong>Notes:</strong> Users need Salesforce CPQ licenses specifically configured for partner use. This includes the Salesforce CPQ for Partners permission set, ensuring that partners can utilize CPQ functionalities such as creating and managing quotes​.</p>
<p>Now, let’s dive into some action!</p>
<p><strong>Flow Design</strong></p>
<p>Due to a known Salesforce limitation with <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_dml_non_mix_sobjects.htm">Mixed DML operations</a>, we can’t update non-setup objects (like Account and Contact) and setup objects (like User) in a single flow. However, we can work around this by processing the requests asynchronously using two separate flows:</p>
<ol>
<li>
<p><strong>Autolaunched No Trigger Flow</strong>: This flow handles the creation of User records and assigning permissions/licenses.</p>
</li>
<li>
<p><strong>Record-Triggered After Save Flow</strong>: This flow triggers the above flow as a sub-flow from the Contact record and ensures any necessary validations.</p>
</li>
</ol>
<p>By using these two flows, we can effectively manage the process without running into Salesforce’s limitations.</p>
<p><strong>Autolaunched No Trigger Flow</strong></p>
<p>Start with creating a few variables that will be used as input in the record-triggered flow.</p>
<ul>
<li>
<p>contactId: A Text Variable to accept Contact Id that’s ‘Available for input’ outside of the flow, to be used as an input in the record-triggered flow.</p>
</li>
<li>
<p>userId: A Text Variable that’s ‘Available for input’ outside of the flow, to be used to store the User Id after creating the user record and then pass it to assign license and permission set in the same flow.</p>
</li>
<li>
<p>Create two formula resources for Alias and Nickname in user record creation. These two fields on user record are required and should be unique. You can come up with you own logic, but a simple formula is to get the first letter of first name and concatenate with last name (of the contact. To get the contact’s first and last names, we will use the Get Record element).</p>
</li>
</ul>
<p>Now that the required variables are created, let’s add the following elements to the flow:</p>
<ul>
<li>
<p><strong>Get Records (Contact Object):</strong> To get the contact record for which the partner user has to be created.<br>
<strong>- Filter Conditions:</strong> All Conditions are Met (And): Id = contactId (variable created above); Leave the rest to default.</p>
</li>
<li>
<p><strong>Get Records (Profile Object):</strong> To get the Profile that has to be assigned to the user during User record creation.<br>
<strong>- Filter Conditions:</strong> All Conditions are Met (And): Name = Partner Community User (Adjust accordingly to the profile name you have created); Leave the rest to default.</p>
</li>
<li>
<p><strong>Get Records (Permission Set Object):</strong> To get the CPQ Partner User Permission Set that has to be assigned to the user after User record creation.<br>
<strong>- Filter Conditions:</strong> All Conditions are Met (And): Label = CPQ Partner User (Adjust accordingly to the permission set name you have created); Leave the rest to default.</p>
</li>
<li>
<p><strong>Create Records (User Object):</strong> To create the user record using the contact Id from above. There a number of required fields for creating a user, I will only list a few here.<br>
<strong>- How to Set record field values:</strong> Manually<br>
- <strong>Create a Record of This Object:</strong> User<br>
- <strong>Set Field Values for the User: <br>
 —</strong> Alias = Alias formula variable from above<br>
 — CommunityNickname = Nickname formula variable from above<br>
 — ContactId = {!GetContact.Id} (From Get Contact records element above)<br>
 — Email, first Name, Last Name from the Get Contact records element above<br>
 — Username: I have assigned the email as user name (by referencing to Get Contact records element), but you can adjust based on your needs.<br>
 — ProfileId = Profile Id from Get Profile records element above<br>
- Store the User Id in the UserId variable created above.</p>
</li>
<li>
<p><strong>Get Records (Permission Set License Object):</strong> To get the Id of Salesforce CPQ License and then assign to the user created above in the next step.</p>
</li>
<li>
<p><strong>Create Records (for License assignment):</strong> To assign the permission set license using the Id from above Get records element.</p>
</li>
<li>
<p><strong>Create Records (for Permission Set assignment):</strong> To assign the permission set (Partner CPQ Permission set) using the Id from above Get records element.</p>
</li>
</ul>
<p>![Flow Summary](<a href="https://cdn-images-1.medium.com/max/800/1">https://cdn-images-1.medium.com/max/800/1</a>*I4xxZOtbmqvBFMVtgjZWCw.png align=&ldquo;center&rdquo;)</p>
<p>That’s it! You are 75% done with the user creation. Next let’s get the record triggered after save flow set up.</p>
<p>Note that the same flow with minor changes can be used for automating Customer community portal user creation or general Salesforce platform user creation.</p>
<p><strong>Record-Triggered After Save Flow</strong></p>
<p>Next create a Record-Triggered flow on Contact object whenever a contact is created or updated. As we cannot have every contact that’s created or updated to be an Experience cloud user (partner portal user in this case), we need a condition to trigger. In my case, I have created a checkbox called Experience Cloud user on the contact object. This flow will only be triggered if this checkbox is checked.</p>
<h4 id="important-step-as-mentioned-earlier-due-to-the-mixed-dml-operations-limitation-now-is-the-time-to-address-this-in-theflow">Important step: As mentioned earlier, due to the mixed DML operations limitation, now is the time to address this in the flow.</h4>
<p>Scroll to the bottom of the ‘Configure Start’ and check the checkbox ‘Include a Run Asynchronously Run path….’, which will add a new path to the start element. One path that runs immediately and the other async. Or you can leverage a schedule path as well.</p>
<p>Below is the screenshot for your reference.</p>
<p>![](<a href="https://cdn-images-1.medium.com/max/800/1">https://cdn-images-1.medium.com/max/800/1</a>*WCKx1thWfIs7JF8UeeDoqw.png align=&ldquo;center&rdquo;)</p>
<p>Start Configuration</p>
<p>In the Run immediately path you can include Update the related account’s IsPartner field to true and any validations that should trigger when the checkbox (experience cloud user) is checked — like checking if an email address is present on the contact or not.</p>
<p>In the Run async path, call the Autolaunched no trigger flow as a Subflow with ContactId set as Triggering Contact’s Contact Id.</p>
<p>![Flow Summary](<a href="https://cdn-images-1.medium.com/max/800/1">https://cdn-images-1.medium.com/max/800/1</a>*VdbWLTKG6bm4SU4TtCXk1w.png align=&ldquo;center&rdquo;)</p>
<p>Voila! That’s all. You have now mastered automation of user record creation through flows and without a single line of apex code.</p>
<p>Let me know what you think of this and any other ideas on how you have achieved this.</p>
<p>In the next part, I’ll cover setting up Experience Cloud with the CPQ Quote object, specifically focusing on the Quote Line Editor.</p>
]]></content:encoded></item></channel></rss>