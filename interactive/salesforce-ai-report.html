<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Salesforce AI Gap: An Analysis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    
    <style>
        /* IMPORT: Space Grotesk (Headings) and Roboto (Body) */
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Space+Grotesk:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f5f5f4;
            color: #292524;
        }

        /* Apply Space Grotesk to Headings and Interactive Elements */
        h1, h2, h3, h4, button, .heading-font {
            font-family: 'Space Grotesk', sans-serif;
        }

        /* Fixed Height for Charts */
        .chart-container {
            position: relative;
            width: 100%;
            height: 350px; 
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #e7e5e4; }
        ::-webkit-scrollbar-thumb { background: #a8a29e; border-radius: 4px; }

        /* Animation */
        .fade-in { animation: fadeIn 0.4s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Active Navigation State */
        .active-nav {
            background-color: #e7e5e4;
            border-right: 4px solid #ea580c;
            font-weight: 600;
        }
    </style>
</head>

<body class="flex flex-row h-screen overflow-hidden min-w-[600px]">

    <aside class="w-64 bg-white border-r border-stone-200 flex flex-col shadow-sm z-10 h-full shrink-0">
        <div class="p-6 border-b border-stone-100 bg-stone-50">
            <h1 class="text-xl font-bold text-stone-800 tracking-tight">Salesforce <span class="text-orange-600">AI Audit</span></h1>
            <p class="text-xs text-stone-500 mt-1 font-roboto">December 2025</p>
        </div>
        
        <nav class="flex-1 overflow-y-auto py-4 space-y-1">
            <button onclick="renderSection('overview')" id="nav-overview" class="w-full text-left px-6 py-3 text-sm text-stone-600 hover:bg-stone-50 hover:text-orange-600 transition-colors active-nav">
                Dashboard Overview
            </button>
            <button onclick="renderSection('root-causes')" id="nav-root-causes" class="w-full text-left px-6 py-3 text-sm text-stone-600 hover:bg-stone-50 hover:text-orange-600 transition-colors">
                Root Cause Analysis
            </button>
            <button onclick="renderSection('model-compare')" id="nav-model-compare" class="w-full text-left px-6 py-3 text-sm text-stone-600 hover:bg-stone-50 hover:text-orange-600 transition-colors">
                Model Comparison
            </button>
            <button onclick="renderSection('reality-lab')" id="nav-reality-lab" class="w-full text-left px-6 py-3 text-sm text-stone-600 hover:bg-stone-50 hover:text-orange-600 transition-colors">
                The Reality Lab
            </button>
            <button onclick="renderSection('strategies')" id="nav-strategies" class="w-full text-left px-6 py-3 text-sm text-stone-600 hover:bg-stone-50 hover:text-orange-600 transition-colors">
                Mitigation Strategies
            </button>
        </nav>

        <div class="p-4 border-t border-stone-100 text-xs text-stone-400 font-roboto">
            Generated by Canvas Create<br>
            Based on User Research
        </div>
    </aside>

    <main id="content-area" class="flex-1 overflow-y-auto bg-stone-50 p-6 relative">
        </main>

<script>
    // --- Data Store ---
    const appData = {
        overview: {
            title: "The Salesforce AI Struggle",
            intro: "Despite the prowess of modern LLMs in 2025, Salesforce professionals report a high failure rate when using tools like ChatGPT, Gemini, or Copilot. The issue isn't just bad codeâ€”it's dangerous configuration advice and false limitations.",
            stats: [
                { label: "Dangerous Configs", value: "15%", desc: "Advice causing data loss" },
                { label: "False Negatives", value: "40%", desc: "Claiming features don't exist" },
                { label: "Context Failures", value: "88%", desc: "Requires Org-specific metadata" }
            ],
            chartData: {
                labels: ['Outdated Documentation', 'Context Blindness', 'Hallucination', 'Complexity Mismatch', 'Generic vs Specific'],
                data: [20, 35, 25, 15, 5]
            }
        },
        rootCauses: {
            title: "Anatomy of Failure: Why It Breaks",
            intro: "Why do models trained on the entire internet fail at Salesforce? The answer lies in the 'Private vs. Public' knowledge gap and the specific architectural complexity of the Salesforce ecosystem.",
            details: [
                {
                    title: '1. The Context Wall',
                    text: 'Standard LLMs (ChatGPT, Gemini) are trained on public data. They do not know your custom objects (`Project__c`), your specific Validation Rules, or your Flow automations. Asking "Why can\'t I close this Opportunity?" is impossible for an AI to answer without access to your Org\'s metadata API.'
                },
                {
                    title: '2. The Release Velocity',
                    text: 'Salesforce releases major updates 3 times a year. Official documentation is vast and fragmented. LLMs struggle to distinguish between a solution valid in 2019 (Process Builder) and 2025 (Flow Builder/Data Cloud), often recommending deprecated tools.'
                },
                {
                    title: '3. "Messy" Training Data',
                    text: 'Community forums (StackExchange, Trailhead) are full of "hacks" and unverified solutions. LLMs ingest this noise alongside official documentation, leading to suggestions that are technically possible but violate best practices.'
                }
            ]
        },
        comparison: {
            title: "Model Showdown",
            intro: "Not all AIs are created equal when it comes to SFDC. We analyzed four major players against key Salesforce competencies. Note: 'Agentforce' represents Salesforce's native GenAI implementation which has a distinct advantage: Context.",
            radarLabels: ['Apex/LWC Code', 'Admin Config', 'Context Awareness', 'Doc Freshness', 'Complex Logic'],
            datasets: [
                { label: 'ChatGPT-4o', data: [85, 70, 10, 80, 75], color: 'rgba(234, 88, 12, 0.6)', borderColor: 'rgba(234, 88, 12, 1)' }, 
                { label: 'MS Copilot', data: [75, 65, 15, 85, 70], color: 'rgba(59, 130, 246, 0.6)', borderColor: 'rgba(59, 130, 246, 1)' }, 
                { label: 'Agentforce (Native)', data: [80, 90, 95, 95, 60], color: 'rgba(16, 185, 129, 0.6)', borderColor: 'rgba(16, 185, 129, 1)' } 
            ]
        },
        reality: {
            title: "The Reality Lab",
            intro: "We prompted AI models with common but tricky Salesforce requests. Use the toggle to compare the AI's hallucination against the working solution.",
            scenarios: [
                {
                    name: "Dangerous Configs",
                    prompt: "How do I disable users from adding Default Account Team and Opportunity Team from User details record?",
                    ai_response: "1. Remove the related lists from the User Page Layout.\n2. Go to Permission Sets and remove 'Account Team Member' create permissions.\n3. Disable 'Account Teams' entirely in Setup.",
                    correct_response: "DO NOT DO WHAT AI SAYS.\n1. User Page Layouts do NOT support removing these specific related lists (limitation).\n2. Permission removal breaks global functionality, not just the default view.\n3. Disabling Account Teams is IRREVERSIBLE and deletes all existing team data.\n\nReal Fix: Use Lightning App Builder to hide components conditionally or use Validation Rules.",
                    analysis: "<strong>High Risk:</strong> The AI suggests the 'Nuclear Option' (Disabling Account Teams) which deletes data and cannot be undone. It also hallucinates that the User Page Layout has standard related list controls for this feature."
                },
                {
                    name: "Guest User Flow",
                    prompt: "How to enable a screen flow to create a Case record as a guest user (without license)?",
                    ai_response: "This is not supported. Guest users cannot create records. You must purchase a license or use Web-to-Case.\n\n(Or implies a complex loop of permission sets that don't exist for Guests).",
                    correct_response: "1. Either use the OOTB Support Form for simple use cases or create the Screen Flow.\n2. In Flow 'Advanced Settings', set 'How to Run the Flow' to 'System Context Without Sharing'.\n3. Embed in Experience Cloud (publicly accessible).\n\nResult: Works perfectly without a license.",
                    analysis: "<strong>False Limitation:</strong> The AI gives up, telling the user it's impossible. This causes architects to abandon valid, simple solutions in favor of expensive or complex alternatives."
                },
                {
                    name: "LWC Navigation",
                    prompt: "How do I navigate to a record page in LWC?",
                    ai_response: "import { NavigationMixin } from 'lightning/navigation';\nthis[NavigationMixin.Navigate]({\n    type: 'standard__recordPage',\n    attributes: {\n        recordId: '001...',\n        actionName: 'view'\n    }\n});",
                    correct_response: "import { NavigationMixin } from 'lightning/navigation';\nthis[NavigationMixin.Navigate]({\n    type: 'standard__recordPage',\n    attributes: {\n        recordId: '001...',\n        objectApiName: 'Account', // AI often forgets this\n        actionName: 'view'\n    }\n});",
                    analysis: "<strong>Syntax Error:</strong> The AI frequently omits required parameters like 'objectApiName' or invents page reference types that don't exist, leading to silent failures in the component."
                },
                {
                    name: "SOQL Relationships",
                    prompt: "Select all Contacts for a custom Project object.",
                    ai_response: "SELECT Id, Name, \n(SELECT LastName FROM Contacts) \nFROM Project__c",
                    correct_response: "SELECT Id, Name, \n(SELECT LastName FROM Contacts__r) \nFROM Project__c",
                    analysis: "<strong>Hallucination:</strong> Without metadata access, AI guesses the relationship name. In Salesforce, custom relationships usually end in '__r', which generic models often forget."
                }
            ]
        }
    };

    // --- State Management ---
    let charts = {}; 

    // --- Core Rendering Function ---
    function renderSection(sectionId) {
        document.querySelectorAll('nav button').forEach(btn => btn.classList.remove('active-nav'));
        document.getElementById(`nav-${sectionId}`).classList.add('active-nav');

        const contentArea = document.getElementById('content-area');
        contentArea.innerHTML = ''; 

        const container = document.createElement('div');
        container.className = 'fade-in max-w-5xl mx-auto space-y-8';
        
        switch(sectionId) {
            case 'overview': renderOverview(container); break;
            case 'root-causes': renderRootCauses(container); break;
            case 'model-compare': renderComparison(container); break;
            case 'reality-lab': renderReality(container); break;
            case 'strategies': renderStrategies(container); break;
        }

        contentArea.appendChild(container);
    }

    // --- Section Builders ---

    function renderOverview(container) {
        const data = appData.overview;
        container.innerHTML = `
            <header>
                <h2 class="text-3xl font-bold text-stone-800 mb-2">${data.title}</h2>
                <p class="text-base text-stone-600 leading-relaxed">${data.intro}</p>
            </header>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                ${data.stats.map(stat => `
                    <div class="bg-white p-6 rounded-lg shadow-sm border border-stone-200">
                        <div class="text-4xl font-bold text-orange-600 mb-1 heading-font">${stat.value}</div>
                        <div class="font-semibold text-stone-700">${stat.label}</div>
                        <div class="text-xs text-stone-500 mt-2">${stat.desc}</div>
                    </div>
                `).join('')}
            </div>

            <div class="bg-white p-6 rounded-lg shadow-sm border border-stone-200">
                <h3 class="text-base font-semibold text-stone-700 mb-4 border-b border-stone-100 pb-2">Breakdown of AI Failure Modes</h3>
                <div class="chart-container">
                    <canvas id="overviewChart"></canvas>
                </div>
                <p class="text-sm text-stone-500 mt-4 text-center italic">Based on user reports regarding complex Apex & Flow troubleshooting.</p>
            </div>
        `;
        setTimeout(() => { initOverviewChart(); }, 0);
    }

    function renderRootCauses(container) {
        const data = appData.rootCauses;
        container.innerHTML = `
            <header>
                <h2 class="text-3xl font-bold text-stone-800 mb-2">${data.title}</h2>
                <p class="text-base text-stone-600 mb-6">${data.intro}</p>
            </header>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="space-y-4">
                    ${data.details.map(item => `
                        <div class="bg-white p-5 rounded-lg border border-stone-200 shadow-sm hover:shadow-md transition-shadow cursor-default group">
                            <h3 class="text-orange-600 font-bold mb-2 group-hover:text-orange-700 transition-colors heading-font">${item.title}</h3>
                            <p class="text-stone-600 text-sm leading-relaxed">${item.text}</p>
                        </div>
                    `).join('')}
                </div>
                <div class="bg-white p-4 rounded-lg border border-stone-200 shadow-sm flex flex-col">
                    <h3 class="text-base font-semibold text-stone-700 mb-2 px-2">Complexity vs. Accuracy Correlation</h3>
                    <div id="plotlyScatter" class="w-full flex-grow" style="height: 400px;"></div>
                </div>
            </div>
        `;
        setTimeout(() => { initPlotlyScatter(); }, 0);
    }

    function renderComparison(container) {
        const data = appData.comparison;
        container.innerHTML = `
            <header>
                <h2 class="text-3xl font-bold text-stone-800 mb-2">${data.title}</h2>
                <p class="text-base text-stone-600 mb-6">${data.intro}</p>
            </header>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                 <div class="md:col-span-2 bg-white p-6 rounded-lg shadow-sm border border-stone-200">
                    <div class="chart-container"><canvas id="radarChart"></canvas></div>
                 </div>
                 <div class="space-y-4">
                    <div class="bg-stone-100 p-4 rounded-lg border border-stone-200">
                        <h4 class="font-bold text-stone-700 mb-2">Key Takeaway</h4>
                        <p class="text-sm text-stone-600"><strong>Agentforce</strong> wins on Context because it lives inside the Org, but <strong>ChatGPT</strong> often writes cleaner generic JavaScript syntax.</p>
                    </div>
                    <div class="bg-stone-100 p-4 rounded-lg border border-stone-200">
                         <h4 class="font-bold text-stone-700 mb-2">The "Copilot" Factor</h4>
                         <p class="text-sm text-stone-600">MS Copilot struggles specifically with nuanced Salesforce security models compared to pure code generation.</p>
                    </div>
                 </div>
            </div>
        `;
        setTimeout(() => { initRadarChart(); }, 0);
    }

    function renderReality(container) {
        const data = appData.reality;
        container.innerHTML = `
            <header>
                <h2 class="text-3xl font-bold text-stone-800 mb-2">${data.title}</h2>
                <p class="text-base text-stone-600 mb-6">${data.intro}</p>
            </header>
            <div class="bg-white rounded-xl shadow-sm border border-stone-200 overflow-hidden">
                <div class="border-b border-stone-200 bg-stone-50 p-4 flex gap-2 overflow-x-auto">
                    ${data.scenarios.map((s, idx) => `
                        <button onclick="updateScenario(${idx})" 
                            class="px-4 py-2 rounded-full text-sm font-medium transition-colors whitespace-nowrap flex-shrink-0 scenario-btn ${idx === 0 ? 'bg-stone-800 text-white' : 'bg-white text-stone-600 border border-stone-200 hover:bg-stone-100'}"
                            data-index="${idx}">${s.name}</button>
                    `).join('')}
                </div>
                <div class="p-6" id="scenario-content"></div>
            </div>
        `;
        setTimeout(() => { updateScenario(0); }, 0);
    }

    function renderStrategies(container) {
        container.innerHTML = `
            <header>
                <h2 class="text-3xl font-bold text-stone-800 mb-2">Mitigation Strategies</h2>
                <p class="text-base text-stone-600 mb-6">Since AI isn't going away, here is how to force it to be more accurate with Salesforce data.</p>
            </header>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-lg shadow-sm border-l-4 border-orange-500">
                    <h3 class="text-xl font-bold text-stone-800 mb-3">1. Provide the Schema</h3>
                    <p class="text-stone-600 mb-4">Never ask generic questions. Paste your object JSON or field list first.</p>
                    <div class="bg-stone-100 p-3 rounded text-xs font-mono text-stone-700">"I have a custom object Project__c with fields: Status__c (Picklist), Budget__c (Currency). Write a SOQL query to..."</div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-sm border-l-4 border-emerald-500">
                    <h3 class="text-xl font-bold text-stone-800 mb-3">2. Force API Versions</h3>
                    <p class="text-stone-600 mb-4">LLMs love deprecated code. Explicitly request modern features.</p>
                    <div class="bg-stone-100 p-3 rounded text-xs font-mono text-stone-700">"...Use LWC lighning-record-form. Do NOT suggest Aura components. Assume API v58.0 or higher."</div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-sm border-l-4 border-blue-500">
                    <h3 class="text-xl font-bold text-stone-800 mb-3">3. The "Official Doc" Check</h3>
                    <p class="text-stone-600 mb-4">AI hallucinates limits. Ask for links, then verify them (even though links often 404).</p>
                    <div class="bg-stone-100 p-3 rounded text-xs font-mono text-stone-700">"Cite the Salesforce Developer limitation for this request. Provide the search term to find the official article."</div>
                </div>
                 <div class="bg-white p-6 rounded-lg shadow-sm border-l-4 border-purple-500">
                    <h3 class="text-xl font-bold text-stone-800 mb-3">4. Use Agentforce for Data</h3>
                    <p class="text-stone-600 mb-4">If you need to know about *your* records, general LLMs will fail. Use native AI.</p>
                    <div class="bg-stone-100 p-3 rounded text-xs font-mono text-stone-700">Use Copilot/Agentforce for: "Summarize the last 5 emails on Account X." Use ChatGPT for: "Write a regex for email validation."</div>
                </div>
            </div>
        `;
    }

    function updateScenario(index) {
        document.querySelectorAll('.scenario-btn').forEach(btn => {
            btn.classList.remove('bg-stone-800', 'text-white');
            btn.classList.add('bg-white', 'text-stone-600', 'border', 'border-stone-200');
        });
        const activeBtn = document.querySelector(`.scenario-btn[data-index="${index}"]`);
        if(activeBtn) {
            activeBtn.classList.remove('bg-white', 'text-stone-600', 'border');
            activeBtn.classList.add('bg-stone-800', 'text-white');
        }

        const s = appData.reality.scenarios[index];
        document.getElementById('scenario-content').innerHTML = `
            <div class="mb-4">
                <span class="text-xs font-bold uppercase tracking-wider text-stone-400 heading-font">The Prompt</span>
                <div class="mt-1 p-3 bg-stone-100 rounded text-stone-800 font-medium border border-stone-200">"${s.prompt}"</div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="flex flex-col">
                    <div class="flex items-center gap-2 mb-2">
                        <div class="w-3 h-3 rounded-full bg-red-500"></div>
                        <span class="font-bold text-stone-700 heading-font">Typical AI Response</span>
                    </div>
                    <pre class="bg-red-50 p-4 rounded-lg border border-red-100 text-xs overflow-x-auto text-stone-800 flex-grow leading-relaxed font-mono whitespace-pre-wrap">${escapeHtml(s.ai_response)}</pre>
                </div>
                <div class="flex flex-col">
                    <div class="flex items-center gap-2 mb-2">
                        <div class="w-3 h-3 rounded-full bg-emerald-500"></div>
                        <span class="font-bold text-stone-700 heading-font">Correct Salesforce Solution</span>
                    </div>
                    <pre class="bg-emerald-50 p-4 rounded-lg border border-emerald-100 text-xs overflow-x-auto text-stone-800 flex-grow leading-relaxed font-mono whitespace-pre-wrap">${escapeHtml(s.correct_response)}</pre>
                </div>
            </div>
            <div class="mt-6 p-4 bg-orange-50 border-l-4 border-orange-400 text-sm text-stone-700">
                <strong>Analysis:</strong> ${s.analysis}
            </div>
        `;
    }

    function escapeHtml(text) { return text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#039;"); }

    function initOverviewChart() {
        if (charts['overview']) charts['overview'].destroy();
        const ctx = document.getElementById('overviewChart').getContext('2d');
        const d = appData.overview.chartData;

        charts['overview'] = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: d.labels,
                datasets: [{
                    data: d.data,
                    backgroundColor: ['#78716c', '#ea580c', '#44403c', '#a8a29e', '#d6d3d1'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'right',
                        labels: { font: { family: 'Roboto', size: 12 }, usePointStyle: true, boxWidth: 8 }
                    }
                }
            }
        });
    }

    function initRadarChart() {
        if (charts['radar']) charts['radar'].destroy();
        const ctx = document.getElementById('radarChart').getContext('2d');
        const d = appData.comparison;

        charts['radar'] = new Chart(ctx, {
            type: 'radar',
            data: {
                labels: d.radarLabels,
                datasets: d.datasets.map(ds => ({ ...ds, borderWidth: 2, pointRadius: 3 }))
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        angleLines: { color: '#e7e5e4' },
                        grid: { color: '#e7e5e4' },
                        pointLabels: { font: { family: 'Space Grotesk', size: 12, weight: 'bold' }, color: '#44403c' },
                        ticks: { display: false }
                    }
                },
                plugins: {
                    legend: {
                        position: 'top',
                        labels: { font: { family: 'Roboto' }, usePointStyle: true }
                    }
                }
            }
        });
    }

    function initPlotlyScatter() {
        const trace1 = {
            x: [1, 2, 3, 4, 5, 6, 7, 8],
            y: [95, 90, 85, 60, 40, 25, 15, 10],
            mode: 'markers',
            type: 'scatter',
            marker: { size: [10, 12, 14, 16, 20, 25, 30, 35], color: '#ea580c', opacity: 0.7 },
            text: ['Basic Concept Definitions', 'Simple Admin Tasks', 'Standard Object SOQL', 'Standard LWC Components', 'Custom Object Logic', 'Complex Flow Logic', 'Legacy Visualforce/Apex', 'CPQ / Field Service Logic'],
            hovertemplate: '<b>%{text}</b><br>Complexity: %{x}<br>Accuracy: %{y}%<extra></extra>'
        };

        const layout = {
            margin: { t: 20, r: 20, b: 40, l: 50 },
            xaxis: { title: 'Topic Complexity (1-10)', showgrid: true, gridcolor: '#e7e5e4', titlefont: {family: 'Space Grotesk'} },
            yaxis: { title: 'Answer Accuracy (%)', showgrid: true, gridcolor: '#e7e5e4', titlefont: {family: 'Space Grotesk'} },
            paper_bgcolor: 'rgba(0,0,0,0)',
            plot_bgcolor: 'rgba(0,0,0,0)',
            font: { family: 'Roboto', color: '#44403c' },
            showlegend: false
        };

        Plotly.newPlot('plotlyScatter', [trace1], layout, {displayModeBar: false, responsive: true});
    }

    document.addEventListener('DOMContentLoaded', () => { renderSection('overview'); });
</script>
</body>
</html>