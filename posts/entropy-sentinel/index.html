<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>The Vibe Coding Trap: Architecting â€˜Entropy Sentinelâ€™, a Local-First Bodyguard for Your Clipboard | Pavan Chavali</title><meta name=keywords content="VSCodeExtension,VibeCoding,AIProgramming,CursorAI,GitHubCopilot,DevExperience,SoftwareArchitecture,security,privacy"><meta name=description content="AI tools like Cursor and Claude speed us up, but they don't audit for safety. Learn how I built a zero-latency 'Bodyguard' for my clipboard that catches secrets before they hit your commit history."><meta name=author content="Pavan Chavali"><link rel=canonical href=https://pchavali09.github.io/posts/entropy-sentinel/><link crossorigin=anonymous href=/assets/css/stylesheet.69433f42c24d1e72494b4fcfd26fac6220c534e00dcfaea43cf01de572f19fd9.css integrity="sha256-aUM/QsJNHnJJS0/P0m+sYiDFNOANz66kPPAd5XLxn9k=" rel="preload stylesheet" as=style><link rel=icon href="https://pchavali09.github.io/favicon.png?v=1"><link rel=icon type=image/png sizes=16x16 href="https://pchavali09.github.io/favicon.png?v=1"><link rel=icon type=image/png sizes=32x32 href="https://pchavali09.github.io/favicon.png?v=1"><link rel=apple-touch-icon href="https://pchavali09.github.io/favicon.png?v=1"><link rel=mask-icon href=https://pchavali09.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://pchavali09.github.io/posts/entropy-sentinel/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta name=google-site-verification content="sYaGMbxsSK0bG5cVafZOS_1AVQMCzUOltTR38XxR3oM"><script type=text/javascript>(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","ufch0uxp8n")</script><style>@import 'https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&family=Roboto:wght@300;400;500;700&family=JetBrains+Mono:wght@400&display=swap';body{font-family:roboto,-apple-system,BlinkMacSystemFont,sans-serif!important;font-size:18px;line-height:1.7}h1,h2,h3,h4,h5,h6,.entry-title,.first-entry-title{font-family:space grotesk,sans-serif!important;font-weight:700;letter-spacing:-.03em}code,pre,kbd,samp{font-family:jetbrains mono,monospace!important;font-size:15px}.post-content{font-weight:400}</style><meta property="og:url" content="https://pchavali09.github.io/posts/entropy-sentinel/"><meta property="og:site_name" content="Pavan Chavali"><meta property="og:title" content="The Vibe Coding Trap: Architecting â€˜Entropy Sentinelâ€™, a Local-First Bodyguard for Your Clipboard"><meta property="og:description" content="AI tools like Cursor and Claude speed us up, but they don't audit for safety. Learn how I built a zero-latency 'Bodyguard' for my clipboard that catches secrets before they hit your commit history."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-12-16T00:00:00+00:00"><meta property="article:modified_time" content="2025-12-16T00:00:00+00:00"><meta property="article:tag" content="VSCodeExtension"><meta property="article:tag" content="VibeCoding"><meta property="article:tag" content="AIProgramming"><meta property="article:tag" content="CursorAI"><meta property="article:tag" content="GitHubCopilot"><meta property="article:tag" content="DevExperience"><meta property="og:image" content="https://pchavali09.github.io/posts/entropy-sentinel/entropy-sentinal-cover.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://pchavali09.github.io/posts/entropy-sentinel/entropy-sentinal-cover.png"><meta name=twitter:title content="The Vibe Coding Trap: Architecting â€˜Entropy Sentinelâ€™, a Local-First Bodyguard for Your Clipboard"><meta name=twitter:description content="AI tools like Cursor and Claude speed us up, but they don't audit for safety. Learn how I built a zero-latency 'Bodyguard' for my clipboard that catches secrets before they hit your commit history."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://pchavali09.github.io/posts/"},{"@type":"ListItem","position":2,"name":"The Vibe Coding Trap: Architecting â€˜Entropy Sentinelâ€™, a Local-First Bodyguard for Your Clipboard","item":"https://pchavali09.github.io/posts/entropy-sentinel/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"The Vibe Coding Trap: Architecting â€˜Entropy Sentinelâ€™, a Local-First Bodyguard for Your Clipboard","name":"The Vibe Coding Trap: Architecting â€˜Entropy Sentinelâ€™, a Local-First Bodyguard for Your Clipboard","description":"AI tools like Cursor and Claude speed us up, but they don't audit for safety. Learn how I built a zero-latency 'Bodyguard' for my clipboard that catches secrets before they hit your commit history.","keywords":["VSCodeExtension","VibeCoding","AIProgramming","CursorAI","GitHubCopilot","DevExperience","SoftwareArchitecture","security","privacy"],"articleBody":"The era of â€œVibe Codingâ€ has fundamentally changed the physics of shipping software. We arenâ€™t just typing anymore; we are conducting. Between Cursorâ€™s Composer, the Claude CLI, and GitHub Copilot, the friction of writing syntax has evaporated. You describe the feature, the AI handles the implementation, and you stay in the flow state.\nBut this velocity has a silent tax.\nWhen you are tab-completing entire functions at 100mph, you arenâ€™t auditing line 42 of that generated boilerplate. You are optimizing for â€œDoes it run?â€, not \" Is it safe?\".\nThe reality is that LLMs are trained on public repositories, which means they are trained on other peopleâ€™s bad habits. They love to hallucinate secrets or suggest â€œdummy keysâ€ that look dangerously real. You hit Tab -\u003e Accept, and suddenly, a const STRIPE_KEY = \"sk_live_51M...\" is buried in your commit history.\nMost teams rely on tools like gitleaks to catch this. The problem? Those run at the commit stage. By the time the scanner screams at you, the secret is already in your git history, and you are forced to break your flow to rewrite the SHA tree.\nI didnâ€™t want a scanner that nags me after the fact. I wanted a bodyguard for my clipboardâ€”a tool that catches secrets milliseconds after they hit the editor, without ever sending my code to the cloud.\nSo, I built Entropy Sentinel. Here is the architecture of a local-first security tool.\nğŸ“‰ The â€˜Whyâ€™ (The Vibe Coding Gap) When we embrace tools like Cursor or Copilot, we are already making a massive compromise: we are sending snippets of our codebase to an inference provider (OpenAI, Anthropic, Google, or Microsoft). We accept this trade-off for the 10x speed boost.\nBut we should not double down on that risk.\nIf I am installing a tool specifically designed to catch secretsâ€”AWS keys, Stripe tokens, database passwordsâ€”the absolute last thing I want that tool to do is send those secrets to a third-party server for â€œanalysis.â€\nI designed Entropy Sentinel around two non-negotiable constraints to solve this:\nConstraint 1: The â€œAir-Gapâ€ Simulation (Trust)\nStandard security tools often act like â€œCloud bouncersâ€â€”they intercept your data, check it against a list on a server, and let you know if youâ€™re safe.\nI wanted this extension to function like a biological immune system: entirely self-contained.\nZero API Calls: The extension has no internet permission. It cannot â€œphone home.â€\nZero Database: There is no â€œknown bad listâ€ downloaded from a server. It relies purely on the mathematical properties of the strings themselves.\nIf the tool finds a secret, it stays in RAM. If you close VS Code, the memory is flushed. Nothing is logged. Nothing leaves localhost.\nConstraint 2: The â€œVibeâ€ Requirement (Latency)\nâ€œVibe Codingâ€ is fragile. It relies on instant feedback loops. If an extension introduces even 200ms of input latency because itâ€™s waiting for a REST API to return a 200 OK, the â€œVibeâ€ dies. The editor feels sluggish.\nTo maintain the flow state, the scanner had to run faster than human typing speed (approx 50-100ms per keystroke).\nCloud Architecture: Keystroke -\u003e Network -\u003e Server Logic -\u003e Network -\u003e Alert. (Too slow).\nLocal Architecture: Keystroke -\u003e CPU Math -\u003e Alert. (Instant).\nThe Stack\nTo achieve this, I had to reject the modern â€œSaaSâ€ toolkit and go back to basics:\nCore: VS Code Extension API (TypeScript).\nEngine: Pure JavaScript Math (Shannon Entropy calculations running on the CPU).\nStorage: Your local filesystem (.env files).\nWe arenâ€™t building a platform here. We are building a utility\nğŸ—ï¸ The Architecture (The Build) The core logic relies onÂ Shannon Entropyâ€”a mathematical measure of randomness. English text (or code variables likeÂ const userIndex) has low entropy because it is predictable. Cryptographic keys (likeÂ x8_99!aZ$) have high entropy.\nHowever, a raw entropy check isnâ€™t enough. A random Git Hash is safe; an AWS Secret Key is not. To solve this, I architected aÂ Context-Aware Engine.\nThe â€œSmart Scannerâ€ Logic\nWe couldnâ€™t just use a single global threshold. We analyze theÂ variable nameÂ assigning the value to dynamically adjust the sensitivity of the scanner.\nHigh Sensitivity Mode:Â If the variable is namedÂ api_key,Â secret, orÂ password, we lower the shields. A string with even moderate randomness (Threshold 3.2) triggers an alert.\nLow Sensitivity Mode:Â If the variable is namedÂ page_id,Â color, orÂ uuid, we assume itâ€™s safe. We require extreme randomness (Threshold 4.8) to interrupt the user.\nHere is the simplified logic used in theÂ scanner.tsÂ engine:\nTypeScript\n// The \"Physics\" of the scan function calculateRisk(variableName: string, value: string): RiskLevel { const baseEntropy = getShannonEntropy(value); // Contextual weighting let threshold = 4.5; // Default high bar if (/key|secret|token|auth/i.test(variableName)) { threshold = 3.2; // Lower bar for suspicious names } else if (/color|hash|id/i.test(variableName)) { threshold = 5.0; // Raise bar for safe names } return baseEntropy \u003e threshold ? RiskLevel.HIGH : RiskLevel.SAFE; } The mathematical foundation for the entropy calculation is standard, but applying it conditionally based on AST (Abstract Syntax Tree) context is what stops the tool from being annoying.\nH(X) = -âˆ‘ P(xáµ¢) logâ‚‚ P(xáµ¢)\nWhere P(xáµ¢) is the probability of character xáµ¢ appearing in the string.\nâš¡ The â€œKiller Featureâ€: The One-Click Vault Developers arenâ€™t lazy; they are efficient. Creating aÂ .envÂ file, defining the variable, and swapping the code takes about 45 seconds of context switching. That is 44 seconds too long.\nI built an automated refactor action into the extension using the VS CodeÂ CodeActionProviderÂ API.\nDetection:Â The scanner underlines the string in red.\nAction:Â The user clicks the Lightbulb ğŸ’¡ (or hitsÂ Cmd+.).\nExecution:\nThe extension reads theÂ .envÂ file in the root.\nIt appendsÂ VARIABLE_NAME=the_secret_string.\nIt rewrites the editor line toÂ process.env.VARIABLE_NAME.\nThe result?Â You go from insecure to production-ready in one click, without ever leaving the file.\nVisual Note:Â Imagine a UI where the red squiggly line turns into a cleanÂ process.envÂ variable instantly. That is the dopamine hit of secure engineering.\nâš ï¸ The Reality Check (The Constraints) Marketing will tell you this tool is â€œAI-Powered.â€Â Physics tells you itâ€™s a regex loop running on the main thread.Â Here is where we hit the wall.\nThe Performance Tax In v0.1, I hooked the scanner into theÂ onDidChangeTextDocumentÂ event. This meant the extension ran the entropy math on theÂ entire fileÂ every time I pressed a key. VS Code immediately flagged the extension for high CPU usage.\nThe Fix:Â I implemented aÂ DebounceÂ pattern. The scanner now waits for 500ms of idle time (user stops typing) before scanning only theÂ changed range, not the whole file.\nThe â€œCSSâ€ Problem (False Positives) My initial entropy algorithm hated frontend developers. It flagged every hex color code (e.g.,Â #5D3A9B) as a potential secret.Â The Fix:Â We had to implement â€œIgnore Listsâ€ for specific file extensions (.css,Â .scss,Â .lock) and specific patterns (strings starting withÂ #Â and length \u003c 8).\nVisuals vs. Diagnostics I started by painting red boxes usingÂ createTextEditorDecorationType. This looked cool but was functionally dumbâ€”it didnâ€™t integrate with VS Codeâ€™s native â€œProblemsâ€ tab. I had to refactor the entire rendering engine to useÂ DiagnosticCollection. This allowed the native â€œQuick Fixâ€ lightbulb to appear, which was critical for the user experience.\nğŸ›¡ï¸ Open Source \u0026 Trust Because this tool reads your clipboard and scans your active editor,Â trust is binary.Â You either have it, or you donâ€™t.\nIf this were a closed-source SaaS, I wouldnâ€™t install it, and neither should you. That is whyÂ Entropy SentinelÂ is 100% Open Source. You can audit theÂ scanner.tsÂ file yourself to verify that noÂ fetch()Â calls are sending your API keys to my server.\nView the Source: entropy-sentinel ğŸ’¬ Letâ€™s Argue We talk a lot about â€œShift Leftâ€ in security. But are we giving developers the tools to actually do it, or just giving them more homework?\nDoes your team rely on pre-commit hooks, or do you have a way to catch secretsÂ duringÂ the vibe coding phase?Â Let me know in the comments.\nI learn as much from the debate as I do from the documentation.\nğŸŒ± Want more experiments? This is just one plant in my digital garden. Iâ€™m constantly breaking things, hitting limits, and documenting the fixes over at my personal site.\nIf you like deep dives into the â€œReal Worldâ€ of Enterprise AI (minus the marketing fluff), go check it out:ğŸ‘‰ Pavanâ€™s Digital Garden\n","wordCount":"1381","inLanguage":"en","image":"https://pchavali09.github.io/posts/entropy-sentinel/entropy-sentinal-cover.png","datePublished":"2025-12-16T00:00:00Z","dateModified":"2025-12-16T00:00:00Z","author":{"@type":"Person","name":"Pavan Chavali"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://pchavali09.github.io/posts/entropy-sentinel/"},"publisher":{"@type":"Organization","name":"Pavan Chavali","logo":{"@type":"ImageObject","url":"https://pchavali09.github.io/favicon.png?v=1"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://pchavali09.github.io/ accesskey=h title="Pavan Chavali (Alt + H)">Pavan Chavali</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://pchavali09.github.io/posts/ title=Blog><span>Blog</span></a></li><li><a href=https://pchavali09.github.io/about/ title="About Me"><span>About Me</span></a></li><li><a href=https://pchavali09.github.io/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://pchavali09.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://pchavali09.github.io/#newsletter title=Subscribe><span>Subscribe</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://pchavali09.github.io/>Home</a>&nbsp;Â»&nbsp;<a href=https://pchavali09.github.io/posts/>Posts</a></div><h1 class=post-title>The Vibe Coding Trap: Architecting â€˜Entropy Sentinelâ€™, a Local-First Bodyguard for Your Clipboard</h1><div class=post-description>AI tools like Cursor and Claude speed us up, but they don't audit for safety. Learn how I built a zero-latency 'Bodyguard' for my clipboard that catches secrets before they hit your commit history.</div><div class=post-meta><span title='2025-12-16 00:00:00 +0000 UTC'>December 16, 2025</span>&nbsp;Â·&nbsp;<span>7 min</span>&nbsp;Â·&nbsp;<span>Pavan Chavali</span></div></header><figure class=entry-cover><img loading=eager srcset='https://pchavali09.github.io/posts/entropy-sentinel/entropy-sentinal-cover_hu_69bd78eb0f982dc4.png 360w,https://pchavali09.github.io/posts/entropy-sentinel/entropy-sentinal-cover_hu_45c8677624c2ad81.png 480w,https://pchavali09.github.io/posts/entropy-sentinel/entropy-sentinal-cover_hu_7cc599b1be7ca428.png 720w,https://pchavali09.github.io/posts/entropy-sentinel/entropy-sentinal-cover_hu_a8624ff63c09dc7f.png 1080w,https://pchavali09.github.io/posts/entropy-sentinel/entropy-sentinal-cover_hu_1f91e39d75d2dffa.png 1500w,https://pchavali09.github.io/posts/entropy-sentinel/entropy-sentinal-cover.png 2816w' src=https://pchavali09.github.io/posts/entropy-sentinel/entropy-sentinal-cover.png sizes="(min-width: 768px) 720px, 100vw" width=2816 height=1536 alt="Minimalist digital art featuring a glowing orange shield icon centering a stream of blue data waves on a dark background. Text reads 'ENTROPY SENTINEL: Local-First Security'. Represents local-first cybersecurity architecture and data privacy."></figure><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><ul><li><a href=#-the-why-the-vibe-coding-gap>ğŸ“‰ The &lsquo;Why&rsquo; (The Vibe Coding Gap)</a></li><li><a href=#-the-architecture-the-build>ğŸ—ï¸ The Architecture (The Build)</a></li><li><a href=#-the-killer-feature-the-one-click-vault>âš¡ The &ldquo;Killer Feature&rdquo;: The One-Click Vault</a></li><li><a href=#-the-reality-check-the-constraints>âš ï¸ The Reality Check (The Constraints)</a></li><li><a href=#-open-source--trust>ğŸ›¡ï¸ Open Source & Trust</a></li><li><a href=#-lets-argue>ğŸ’¬ Let&rsquo;s Argue</a></li></ul></li></ul></nav></div></details></div><div class=post-content><p>The era of <strong>&ldquo;Vibe Coding&rdquo;</strong> has fundamentally changed the physics of shipping software. We aren&rsquo;t just typing anymore; we are conducting. Between <strong>Cursorâ€™s Composer</strong>, the <strong>Claude CLI</strong>, and <strong>GitHub Copilot</strong>, the friction of writing syntax has evaporated. You describe the feature, the AI handles the implementation, and you stay in the flow state.</p><p>But this velocity has a silent tax.</p><p>When you are tab-completing entire functions at 100mph, you aren&rsquo;t auditing line 42 of that generated boilerplate. You are optimizing for &ldquo;Does it run?&rdquo;, not " Is it safe?".</p><p>The reality is that LLMs are trained on public repositories, which means they are trained on other people&rsquo;s bad habits. They love to hallucinate secrets or suggest &ldquo;dummy keys&rdquo; that look dangerously real. You hit <code>Tab</code> -> <code>Accept</code>, and suddenly, a <code>const STRIPE_KEY = "sk_live_51M..."</code> is buried in your commit history.</p><p>Most teams rely on tools like <code>gitleaks</code> to catch this. The problem? Those run at the <strong>commit</strong> stage. By the time the scanner screams at you, the secret is already in your git history, and you are forced to break your flow to rewrite the SHA tree.</p><p>I didn&rsquo;t want a scanner that nags me after the fact. I wanted a bodyguard for my clipboardâ€”a tool that catches secrets milliseconds after they hit the editor, without ever sending my code to the cloud.</p><p>So, I built <strong>Entropy Sentinel</strong>. Here is the architecture of a local-first security tool.</p><hr><h3 id=-the-why-the-vibe-coding-gap>ğŸ“‰ The &lsquo;Why&rsquo; (The Vibe Coding Gap)<a hidden class=anchor aria-hidden=true href=#-the-why-the-vibe-coding-gap>#</a></h3><p>When we embrace tools like <strong>Cursor</strong> or <strong>Copilot</strong>, we are already making a massive compromise: we are sending snippets of our codebase to an inference provider (OpenAI, Anthropic, Google, or Microsoft). We accept this trade-off for the 10x speed boost.</p><p><strong>But we should not double down on that risk.</strong></p><p>If I am installing a tool specifically designed to catch <em>secrets</em>â€”AWS keys, Stripe tokens, database passwordsâ€”the absolute last thing I want that tool to do is send those secrets to a third-party server for &ldquo;analysis.&rdquo;</p><p>I designed Entropy Sentinel around two non-negotiable constraints to solve this:</p><p><strong>Constraint 1: The &ldquo;Air-Gap&rdquo; Simulation (Trust)</strong></p><p>Standard security tools often act like &ldquo;Cloud bouncers&rdquo;â€”they intercept your data, check it against a list on a server, and let you know if you&rsquo;re safe.</p><p>I wanted this extension to function like a <strong>biological immune system</strong>: entirely self-contained.</p><ul><li><p><strong>Zero API Calls:</strong> The extension has no internet permission. It cannot &ldquo;phone home.&rdquo;</p></li><li><p><strong>Zero Database:</strong> There is no &ldquo;known bad list&rdquo; downloaded from a server. It relies purely on the mathematical properties of the strings themselves.</p></li></ul><p>If the tool finds a secret, it stays in RAM. If you close VS Code, the memory is flushed. Nothing is logged. Nothing leaves <code>localhost</code>.</p><p><strong>Constraint 2: The &ldquo;Vibe&rdquo; Requirement (Latency)</strong></p><p>&ldquo;Vibe Coding&rdquo; is fragile. It relies on instant feedback loops. If an extension introduces even 200ms of input latency because it&rsquo;s waiting for a REST API to return a 200 OK, the &ldquo;Vibe&rdquo; dies. The editor feels sluggish.</p><p>To maintain the flow state, the scanner had to run faster than human typing speed (approx 50-100ms per keystroke).</p><ul><li><p><strong>Cloud Architecture:</strong> <code>Keystroke</code> -> <code>Network</code> -> <code>Server Logic</code> -> <code>Network</code> -> <code>Alert</code>. (Too slow).</p></li><li><p><strong>Local Architecture:</strong> <code>Keystroke</code> -> <code>CPU Math</code> -> <code>Alert</code>. (Instant).</p></li></ul><p><strong>The Stack</strong></p><p>To achieve this, I had to reject the modern &ldquo;SaaS&rdquo; toolkit and go back to basics:</p><ul><li><p><strong>Core:</strong> VS Code Extension API (TypeScript).</p></li><li><p><strong>Engine:</strong> Pure JavaScript Math (Shannon Entropy calculations running on the CPU).</p></li><li><p><strong>Storage:</strong> Your local filesystem (<code>.env</code> files).</p></li></ul><p>We aren&rsquo;t building a platform here. We are building a utility</p><hr><h3 id=-the-architecture-the-build>ğŸ—ï¸ The Architecture (The Build)<a hidden class=anchor aria-hidden=true href=#-the-architecture-the-build>#</a></h3><p>The core logic relies onÂ <strong>Shannon Entropy</strong>â€”a mathematical measure of randomness. English text (or code variables likeÂ <code>const userIndex</code>) has low entropy because it is predictable. Cryptographic keys (likeÂ <code>x8_99!aZ$</code>) have high entropy.</p><p>However, a raw entropy check isn&rsquo;t enough. A random Git Hash is safe; an AWS Secret Key is not. To solve this, I architected aÂ <strong>Context-Aware Engine</strong>.</p><p><strong>The &ldquo;Smart Scanner&rdquo; Logic</strong></p><p>We couldn&rsquo;t just use a single global threshold. We analyze theÂ <em>variable name</em>Â assigning the value to dynamically adjust the sensitivity of the scanner.</p><ul><li><p><strong>High Sensitivity Mode:</strong>Â If the variable is namedÂ <code>api_key</code>,Â <code>secret</code>, orÂ <code>password</code>, we lower the shields. A string with even moderate randomness (Threshold 3.2) triggers an alert.</p></li><li><p><strong>Low Sensitivity Mode:</strong>Â If the variable is namedÂ <code>page_id</code>,Â <code>color</code>, orÂ <code>uuid</code>, we assume it&rsquo;s safe. We require extreme randomness (Threshold 4.8) to interrupt the user.</p></li></ul><p>Here is the simplified logic used in theÂ <code>scanner.ts</code>Â engine:</p><p>TypeScript</p><pre tabindex=0><code>// The &#34;Physics&#34; of the scan
function calculateRisk(variableName: string, value: string): RiskLevel {
  const baseEntropy = getShannonEntropy(value);
  
  // Contextual weighting
  let threshold = 4.5; // Default high bar
  
  if (/key|secret|token|auth/i.test(variableName)) {
    threshold = 3.2; // Lower bar for suspicious names
  } else if (/color|hash|id/i.test(variableName)) {
    threshold = 5.0; // Raise bar for safe names
  }

  return baseEntropy &gt; threshold ? RiskLevel.HIGH : RiskLevel.SAFE;
}
</code></pre><p>The mathematical foundation for the entropy calculation is standard, but applying it conditionally based on AST (Abstract Syntax Tree) context is what stops the tool from being annoying.</p><p>H(X) = -âˆ‘ P(xáµ¢) logâ‚‚ P(xáµ¢)</p><p>Where P(xáµ¢) is the probability of character xáµ¢ appearing in the string.</p><hr><h3 id=-the-killer-feature-the-one-click-vault>âš¡ The &ldquo;Killer Feature&rdquo;: The One-Click Vault<a hidden class=anchor aria-hidden=true href=#-the-killer-feature-the-one-click-vault>#</a></h3><p>Developers aren&rsquo;t lazy; they are efficient. Creating aÂ <code>.env</code>Â file, defining the variable, and swapping the code takes about 45 seconds of context switching. That is 44 seconds too long.</p><p>I built an automated refactor action into the extension using the VS CodeÂ <code>CodeActionProvider</code>Â API.</p><ol><li><p><strong>Detection:</strong>Â The scanner underlines the string in red.</p></li><li><p><strong>Action:</strong>Â The user clicks the Lightbulb ğŸ’¡ (or hitsÂ <code>Cmd+.</code>).</p></li><li><p><strong>Execution:</strong></p><ul><li><p>The extension reads theÂ <code>.env</code>Â file in the root.</p></li><li><p>It appendsÂ <code>VARIABLE_NAME=the_secret_string</code>.</p></li><li><p>It rewrites the editor line toÂ <code>process.env.VARIABLE_NAME</code>.</p></li></ul></li></ol><p><strong>The result?</strong>Â You go from insecure to production-ready in one click, without ever leaving the file.</p><blockquote><p><strong>Visual Note:</strong>Â Imagine a UI where the red squiggly line turns into a cleanÂ <code>process.env</code>Â variable instantly. That is the dopamine hit of secure engineering.</p></blockquote><hr><h3 id=-the-reality-check-the-constraints>âš ï¸ The Reality Check (The Constraints)<a hidden class=anchor aria-hidden=true href=#-the-reality-check-the-constraints>#</a></h3><p>Marketing will tell you this tool is &ldquo;AI-Powered.&rdquo;Â <strong>Physics tells you it&rsquo;s a regex loop running on the main thread.</strong>Â Here is where we hit the wall.</p><ol><li><strong>The Performance Tax</strong></li></ol><p>In v0.1, I hooked the scanner into theÂ <code>onDidChangeTextDocument</code>Â event. This meant the extension ran the entropy math on theÂ <em>entire file</em>Â every time I pressed a key. VS Code immediately flagged the extension for high CPU usage.</p><p><strong>The Fix:</strong>Â I implemented aÂ <strong>Debounce</strong>Â pattern. The scanner now waits for 500ms of idle time (user stops typing) before scanning only theÂ <em>changed range</em>, not the whole file.</p><ol start=2><li><strong>The &ldquo;CSS&rdquo; Problem (False Positives)</strong></li></ol><p>My initial entropy algorithm hated frontend developers. It flagged every hex color code (e.g.,Â <code>#5D3A9B</code>) as a potential secret.Â <strong>The Fix:</strong>Â We had to implement &ldquo;Ignore Lists&rdquo; for specific file extensions (<code>.css</code>,Â <code>.scss</code>,Â <code>.lock</code>) and specific patterns (strings starting withÂ <code>#</code>Â and length &lt; 8).</p><ol start=3><li><strong>Visuals vs. Diagnostics</strong></li></ol><p>I started by painting red boxes usingÂ <code>createTextEditorDecorationType</code>. This looked cool but was functionally dumbâ€”it didn&rsquo;t integrate with VS Code&rsquo;s native &ldquo;Problems&rdquo; tab. I had to refactor the entire rendering engine to useÂ <code>DiagnosticCollection</code>. This allowed the native &ldquo;Quick Fix&rdquo; lightbulb to appear, which was critical for the user experience.</p><hr><h3 id=-open-source--trust>ğŸ›¡ï¸ Open Source & Trust<a hidden class=anchor aria-hidden=true href=#-open-source--trust>#</a></h3><p>Because this tool reads your clipboard and scans your active editor,Â <strong>trust is binary.</strong>Â You either have it, or you don&rsquo;t.</p><p>If this were a closed-source SaaS, I wouldn&rsquo;t install it, and neither should you. That is whyÂ <strong>Entropy Sentinel</strong>Â is 100% Open Source. You can audit theÂ <code>scanner.ts</code>Â file yourself to verify that noÂ <code>fetch()</code>Â calls are sending your API keys to my server.</p><ul><li><strong>View the Source:</strong> <a href=https://github.com/pchavali09/entropy-sentinel>entropy-sentinel</a></li></ul><hr><h3 id=-lets-argue>ğŸ’¬ Let&rsquo;s Argue<a hidden class=anchor aria-hidden=true href=#-lets-argue>#</a></h3><p>We talk a lot about &ldquo;Shift Left&rdquo; in security. But are we giving developers the tools to actually do it, or just giving them more homework?</p><p>Does your team rely on pre-commit hooks, or do you have a way to catch secretsÂ <em>during</em>Â the vibe coding phase?Â Let me know in the comments.</p><p><em>I learn as much from the debate as I do from the documentation.</em></p><p>ğŸŒ± <strong>Want more experiments?</strong> This is just one plant in my digital garden. Iâ€™m constantly breaking things, hitting limits, and documenting the fixes over at my personal site.</p><p>If you like deep dives into the &ldquo;Real World&rdquo; of Enterprise AI (minus the marketing fluff), go check it out:ğŸ‘‰ <strong><a href=https://pchavali09.github.io>Pavan&rsquo;s Digital Garden</a></strong></p></div><div style="margin-top:30px;font-style:italic;font-size:14px;color:var(--secondary);opacity:.8;border-top:1px dashed var(--border);padding-top:10px">*Note: The stories and scars are real (and mine). AI just helped with the grammar and the paintbrush.* ğŸ¤–ğŸ¨</div><footer class=post-footer><ul class=post-tags><li><a href=https://pchavali09.github.io/tags/vscodeextension/>VSCodeExtension</a></li><li><a href=https://pchavali09.github.io/tags/vibecoding/>VibeCoding</a></li><li><a href=https://pchavali09.github.io/tags/aiprogramming/>AIProgramming</a></li><li><a href=https://pchavali09.github.io/tags/cursorai/>CursorAI</a></li><li><a href=https://pchavali09.github.io/tags/githubcopilot/>GitHubCopilot</a></li><li><a href=https://pchavali09.github.io/tags/devexperience/>DevExperience</a></li><li><a href=https://pchavali09.github.io/tags/softwarearchitecture/>SoftwareArchitecture</a></li><li><a href=https://pchavali09.github.io/tags/security/>Security</a></li><li><a href=https://pchavali09.github.io/tags/privacy/>Privacy</a></li></ul><nav class=paginav><a class=next href=https://pchavali09.github.io/posts/architecting-freedom/><span class=title>Next Â»</span><br><span>Architecting Freedom: Building a Secure, Serverless Portfolio for $0</span></a></nav></footer><script src=https://giscus.app/client.js data-repo=pchavali09/pchavali09.github.io data-repo-id=R_kgDOQcUWfQ data-category=General data-category-id=DIC_kwDOQcUWfc4CzEzC data-mapping=url data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=en crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2025 <a href=https://pchavali09.github.io/>Pavan Chavali</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg></a><div id=newsletter class=newsletter-box style="background:var(--entry);border:1px solid var(--border);border-radius:var(--radius);padding:40px;margin:60px auto;text-align:center;max-width:700px"><h3 style="margin-top:0;font-family:space grotesk,sans-serif;font-size:24px">ğŸ“© Join the Architecture & AI Newsletter</h3><p style=color:var(--secondary);margin-bottom:25px;font-size:16px>Get notified when I publish new guides on Salesforce, Mulesoft, and AI Agents.</p><script>(function(e,t,n,s,o,i,a){e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},i=t.createElement(n),i.async=1,i.src=s,a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(i,a)})(window,document,"script","https://assets.mailerlite.com/js/universal.js","ml"),ml("account","1944348")</script><div class=ml-embedded data-form=tppu9y></div><div style="background:rgba(255,166,0,.15);border:1px solid orange;border-radius:6px;padding:10px;margin-top:20px;font-size:13px;color:var(--primary);display:inline-block"><strong>âš ï¸ Note:</strong> Confirmation email often lands in <u>Spam</u>. Please check there!</div><p style=font-size:13px;color:var(--secondary);margin-top:15px;opacity:.7>Zero spam. Unsubscribe anytime.</p></div><div class=floating-socials><button onclick=openModal() title=Subscribe style="background:0 0;border:none;padding:0;cursor:pointer">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color:var(--primary)"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
</button>
<a href=https://github.com/pchavali09 target=_blank rel=noopener title=GitHub><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>
</a><a href=https://linkedin.com/in/npkchavali target=_blank rel=noopener title=LinkedIn><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg>
</a><a href=/index.xml target=_blank title=RSS><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></div><div id=subscribe-modal class=modal-overlay onclick=closeModal(event)><div class=modal-content><button class=close-btn onclick=closeModal(event,!0)>Ã—</button><h3 style="font-family:space grotesk,sans-serif">Join the Newsletter</h3><p style=font-size:14px;color:var(--secondary);margin-bottom:20px>Weekly architecture patterns & AI experiments.</p><div class=ml-embedded data-form=tppu9y></div><div style="background:rgba(255,166,0,.15);border:1px solid orange;border-radius:6px;padding:10px;margin-top:20px;font-size:13px;color:var(--primary);text-align:center"><strong>âš ï¸ Note:</strong> Confirmation email often lands in <u>Spam</u>. Please check there!</div><p style=font-size:10px;color:var(--secondary);margin-top:15px;opacity:.5;text-align:center>Protected by reCAPTCHA.
<a href=https://policies.google.com/privacy target=_blank>Privacy</a> &
<a href=https://policies.google.com/terms target=_blank>Terms</a>.</p></div></div><style>.grecaptcha-badge{visibility:hidden}.modal-overlay{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.6);backdrop-filter:blur(4px);z-index:10000;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease}.modal-content{background:var(--entry);padding:40px;border-radius:var(--radius);border:1px solid var(--border);width:90%;max-width:500px;position:relative;transform:translateY(20px);transition:transform .3s ease;box-shadow:0 20px 50px rgba(0,0,0,.3)}.modal-overlay.open{display:flex;opacity:1}.modal-overlay.open .modal-content{transform:translateY(0)}.close-btn{position:absolute;top:10px;right:15px;background:0 0;border:none;font-size:28px;color:var(--secondary);cursor:pointer}.home-info .social-icons{display:none}.floating-socials{position:fixed;left:30px;bottom:50px;display:flex;flex-direction:column;gap:20px;z-index:999}.floating-socials a,.floating-socials button{color:var(--secondary);transition:transform .2s,color .2s}.floating-socials a:hover,.floating-socials button:hover{color:var(--primary);transform:translateY(-3px)}.floating-socials svg{width:24px;height:24px}@media(max-width:1100px){.floating-socials{display:none}.home-info .social-icons{display:flex}}</style><script>function openModal(){const e=document.getElementById("subscribe-modal");e.classList.add("open")}function closeModal(e,t){if(t||e.target===document.getElementById("subscribe-modal")){const e=document.getElementById("subscribe-modal");e.classList.remove("open")}}</script><script src=https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js></script><script>const images=Array.from(document.querySelectorAll(".post-content img"));mediumZoom(images,{margin:24,background:"#1d1e20",scrollOffset:0})</script><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>